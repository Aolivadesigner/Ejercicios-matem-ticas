<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Animales filtrables</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #333; padding: 8px; text-align: center; }
    th { background-color: #4CAF50; color: white; }
    tr:nth-child(even) { background-color: #f2f2f2; }
    .filtros { margin-bottom: 10px; }
    .filtros label { margin-right: 15px; display: inline-block; margin-bottom: 5px; }
    input, select { padding: 5px; }
  </style>
</head>
<body>
  <h1>Animales y propiedades</h1>

  <div class="filtros">
    <label>Buscar nombre: <input type="text" id="buscarNombre" placeholder="Escribe el nombre..."></label>
    <label>Categoría:
      <select id="filtroCategoria">
        <option value="">Todas</option>
        <option value="vertebrado">Vertebrado</option>
        <option value="invertebrado">Invertebrado</option>
      </select>
    </label>
    <label>Subcategoría:
      <select id="filtroSubcategoria">
        <option value="">Todas</option>
        <option value="mamifero">Mamífero</option>
        <option value="ave">Ave</option>
        <option value="reptil">Reptil</option>
        <option value="pez">Pez</option>
        <option value="insecto">Insecto</option>
        <option value="aracnido">Arácnido</option>
        <option value="molusco">Molusco</option>
      </select>
    </label>
    <label>Patas:
      <select id="filtroPatas">
        <option value="">Todas</option>
        <option value="0">0</option>
        <option value="2">2</option>
        <option value="4">4</option>
        <option value="6">6</option>
        <option value="8">8</option>
      </select>
    </label>
    <label>Pico:
      <select id="filtroPico">
        <option value="">Todos</option>
        <option value="0">0</option>
        <option value="1">1</option>
      </select>
    </label>
    <label>Alas:
      <select id="filtroAlas">
        <option value="">Todos</option>
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
      </select>
    </label>
  </div>

  <table id="tablaAnimales">
    <thead>
      <tr>
        <th>Animal</th>
        <th>Patas</th>
        <th>Pico</th>
        <th>Alas</th>
        <th>Categoría</th>
        <th>Subcategoría</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script type="module">
    const tbody = document.querySelector("#tablaAnimales tbody");
    const inputNombre = document.getElementById("buscarNombre");
    const filtroCategoria = document.getElementById("filtroCategoria");
    const filtroSubcategoria = document.getElementById("filtroSubcategoria");
    const filtroPatas = document.getElementById("filtroPatas");
    const filtroPico = document.getElementById("filtroPico");
    const filtroAlas = document.getElementById("filtroAlas");

    let animales = {};

    // Renderizar tabla con filtros
    function renderizarTabla() {
      const nombreFiltro = inputNombre.value.toLowerCase();
      const catFiltro = filtroCategoria.value;
      const subcatFiltro = filtroSubcategoria.value;
      const patasFiltro = filtroPatas.value;
      const picoFiltro = filtroPico.value;
      const alasFiltro = filtroAlas.value;

      tbody.innerHTML = "";

      Object.entries(animales).forEach(([animal, props]) => {
        if(nombreFiltro && !animal.toLowerCase().includes(nombreFiltro)) return;
        if(catFiltro && props.categoria !== catFiltro) return;
        if(subcatFiltro && props.subcategoria !== subcatFiltro) return;
        if(patasFiltro && props.patas.toString() !== patasFiltro) return;
        if(picoFiltro && props.pico.toString() !== picoFiltro) return;
        if(alasFiltro && props.alas.toString() !== alasFiltro) return;

        const tr = document.createElement("tr");

        const tdNombre = document.createElement("td");
        tdNombre.textContent = animal;
        tr.appendChild(tdNombre);

        ["patas", "pico", "alas"].forEach(prop => {
          const td = document.createElement("td");
          td.textContent = props[prop];
          tr.appendChild(td);
        });

        const tdCat = document.createElement("td");
        tdCat.textContent = props.categoria;
        tr.appendChild(tdCat);

        const tdSub = document.createElement("td");
        tdSub.textContent = props.subcategoria;
        tr.appendChild(tdSub);

        tbody.appendChild(tr);
      });
    }

    // Cargar JSON externo
    fetch("../diccionario/animalProps.json")
      .then(res => res.json())
      .then(data => {
        animales = data;
        renderizarTabla();
      });

    // Eventos de filtros
    [inputNombre, filtroCategoria, filtroSubcategoria, filtroPatas, filtroPico, filtroAlas]
      .forEach(el => el.addEventListener("input", renderizarTabla));

  </script>
</body>
</html>